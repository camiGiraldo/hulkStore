<div [@routerTransition]>
    <app-page-header [heading]="'Ventas'" [icon]="'fa-building'"></app-page-header>
    <div class="cont-actions">
        <div class="fac-selec">Producto seleccionado: <strong>{{ message }}</strong></div>


        <div class="flt-button-action" title="Crear Venta" (click)="open(content,'new')">
            <i class="fa fa-plus"></i>
        </div>
    </div>

    <table datatable [dtOptions]="dtOptions" id="tbl-ventas" [dtTrigger]="dtTrigger" class="table table-striped table-bordered" cellspacing="0" width="100%"></table>

</div>

<!--FORMULARIO MODAL PARA CREAR Y EDITAR PRODUCTOS-->
<ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">Venta</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form>
            <label style="font-size: 18px; width: 100%; background: #e6e8f3;color: #0f610a; text-align: center;"><i
                    class="fa fa-shopping-cart"></i> Agregar producto a la cesta</label>
            <div class="row">
                <div class="form-group col-md-6">
                    <label for="">Producto: </label>
                    <select name="productoSeleccionado" id="productoSeleccionado" [(ngModel)]="productoSeleccionado" class="form-control">
                        <option value="0" selected="selected">--Seleccionar--</option>
                        <option [ngValue]="pro" *ngFor="let pro of listProducts">{{pro.name}}</option>
                    </select>
                </div>
                <div class="form-group col-md-3">
                    <label for="">Cantidad</label>
                    <input type="text" class="form-control" id="txtCantidad" [(ngModel)]="cantidad" name="cantidad" placeholder="Cantidad" required>
                </div>
                <div class="col-md-2" style="padding-top: 6.5%;">
                    <label for=""></label>
                    <button type="button" class="btn btn-info" (click)="agregarProducto()"><i
                            class="fa fa-plus"></i></button>
                </div>
            </div>
            <div>
                Productos en la cesta:
                <ul style="list-style: none; margin: 0; padding: 0;">
                    <li *ngFor="let pro of listProductToSell" style="background: #6cffb5; padding: 5px;    margin-top: 2px;"><i class="fa fa-shopping-cart"></i> {{pro.name}} - cantidad a vender: {{pro.stock}}
                    </li>
                </ul>
            </div>
            <hr>
            <div class="form-group ">
                <label for="exampleInputEmail1">Total Venta:</label>
                <input type="number" class="form-control" id="txtTotalVenta" [(ngModel)]="totalVenta" name="totalVenta" placeholder="100000" required>
            </div>

        </form>


    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="c('Close click')">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="saveForm()">Guardar</button>

    </div>
</ng-template>


<!--MODAL DE NOTIFICACIONES-->
<ng-template #mdlNotification let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">{{titleNotification}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">

            <div class="col-2 icon-message">
                <i [className]='iconNotification' [style.color]="colorAlert"></i>
            </div>
            <div class="col-10">
                {{messageNotification}}
            </div>

        </div>
    </div>
    <div class="modal-footer">

        <button type="button" class="btn btn-primary" (click)="c('Close click')">Aceptar</button>
    </div>
</ng-template>